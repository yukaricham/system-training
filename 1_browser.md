1章：ブラウザは何をしているか
===
# 今日学べること
- ブラウザがやっていることを理解できる
- Webを取り囲む技術を理解できる
- HTML/CSSの役割を理解できる

# ブラウザは何をやっているか
先週やったhttpのリクエストに加えて、ブラウザがやっていることを正しく理解しましょう。

## ステップ1
ブラウザがhttpリクエストを送ります。これは先週telnetコマンドで実施した内容と似たようなことです。

## ステップ2
httpリクエストがサーバーに到達したら、サーバーはリクエスト受け取ります。

## ステップ3
受け取ったら、サーバーはリクエストに対するhttpレスポンスを用意します。このレスポンスを用意する時点で、PHPなどのサーバサイドのプログラミング言語が動作します。
また、MySQLなどのデータベースに問い合わせるのもこの時点です。

## ステップ4
サーバーはレスポンスを、リクエストを送ってきたブラウザに対して返します。

多くの場合はhtmlを返します。

## ステップ5
ブラウザはレスポンスを解釈します。ここの解釈の仕方がブラウザによって異なります。
多くの場合はブラウザはhtmlを読み込みます。

## ステップ6
必要に応じてブラウザから再度httpリクエストを送ります。

# webサービスを支える技術
さて、簡単にステップ化してみましたがただブラウザでみるだけで多くのステップがあります。

この全てのステップが正常に動作するとこでwebサービスは稼働します。
webサービスの特徴としてとにかく幅広い知識が必要になります。webに関する勉強をする上では大切な事なのでしっかりと認識しておきましょう。

webサービスを作るのしたら以下の知識は必須と言えます。

- サーバ、ネットワークの基礎知識
- PHPなどのサーバサイド言語の知識
- MySQLなどのデータベースの知識
- html
- css
- javascript

まず必要最小限でこの辺りがあげられます。nanapiのような多くのアクセスがあるサービスは、当然これだけでは不十分でさらに、専門性の高いスキルが必要になってきます。

# まず学ぼう、html
webサービスを作る上で絶対に避けられないのがhtmlです。
これはブラウザが解釈するものなので、ブラウザの仕様に合わせて作る必要があります。とはいえ、各ブラウザが勝手なhtmlの仕様を作っても困ります。

そのため、htmlの仕様を策定している団体がいます。その仕様に合わせて、chromeやfirefoxといったブラウザが作られています。

しかしながら困ったもので、仕様の解釈の違いや実装時のバグなどのせいで、同じhtmlでもブラウザによって挙動が変わることがあります。

これをクロスブラウザ問題と言ったりします。別名、IE爆発しろ！というやつです。

# HTMLとはなにか
ブラウザが理解できる文章構造、というのがWebにおいての正しい説明ですが実際にできた経緯はことなります。HTMLの正式名称は**Hyper Text Transwer Protocol**の略で、本来は論文などを読みやすく記述するためのものでした。

論文は目次があったり、単語の説明があったり上から順に読んでいくだけでは読みづらい内容だったりします。そのなかで、文章同士がリンクしあい、クリックしたら別のページに飛んで行くという仕様があると便利だったわけです。そいういう用途から生まれた文章構造がHTMLでした。

HTMLを専門的に書く人を、コーダー・マークアップエンジニア・フロントエンドエンジニアと呼ばれていたりします。突き詰めれば専門性の高いスキルなのですが、どんな職種も最低限のHTMLの知識がないと確実に困ります。というわけで、まずはHTMLを中心に学習しましょう。

ちなみに、HTMLはプログラミング言語ではありません。ただし、HTMLが理解できないとそれ以降のプログラミング言語を学ぶことは不可能なので確実に理解してください。

# 書いてみようhtml
それではhtmlを書いて見ましょう。特別なツールはいりません。テキストエディタだけあれば書けます。
まずは以下ののコードを記述し、index.htmlという名前で保存してください。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Title</title>
</head>
<body>
</body>
</html>

```

保存したらブラウザにドラッグして表示して見ましょう。何も表示されませんよね。では、ソースコードを見てみましょう。さっき書いたhtmlが表示されているはずです。

これはhtmlを記述する上での準備だけをした状態です。そのため、コンテンツは何も表示されません。

# タグを打ってみよう
それでは続いてコンテンツとして表示されるタグを記述してみましょう。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Title</title>
</head>
<body>
<p>hello world</p>
</body>
</html>
```

表示されましたね。これは、```<p></p>```というタグで囲んだ部分が表示されています。HTMLはこのように```<p></p>```のようにして文字列を囲んでいくことで文章に意味をもたせます。それによりただのプレーンテキストに対して意味を持たせることができます。

# 画像を表示してみよう

それでは続いて画像をHTMLから呼び出してみましょう。　画像を呼び出すためには、```<img>```というタグを使います。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Title</title>
</head>
<body>
<p>hello world</p>
<img src="http://p.cdnanapi.com/r/2012/10/18/23/20121018231754_50800f92204ff.jpg" />
</body>
</html>
```

画像が表示されましたね。ここで気づいて欲しいのは、2点あります。
```<img>```というタグのなかに ```src=""```という記述が入っている点と、閉じタグが無い点です。まず前者から説明します。

タグは、そのタグの中に属性と呼ばれる情報を持つことができます。これにより1つのタグでも様々な挙動をさせることができます。それぞれのタグがもっている属性は異なってきますし、量も膨大になるのでここでの細かい説明は割愛します。

後者の閉じタグががない件です。```<p></p>```タグの場合は、そこに囲んだ文章に意味をもたせるという役割のタグでした。一方で、```<img>```タグの場合は囲む対象はなく、```<img>```タグの中で指定をしているURLの画像を表示するという意味になります。こういう場合は、```<img src="xxxxxxxxxxxxxxxx" />```のようにタグの最後にスラッシュを入れることで閉じる事になります。

これが必要なのはXHTMLとよばれる仕様のときに必要なもので、近年のHTML5においては不要です。

# すべてのタグには意味がある

それでは続いて様々なタグを記述してみましょう。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Title</title>
</head>
<body>
<h1>heading1</h1>
<p>hello world</p>
<h2>heading2</h2>
<ul>
  <li>foobar</li>
  <li>foobar</li>
  <li>foobar</li>
</ul>
<h3>heading3</h3>
<ol>
  <li>hogehoge</li>
  <li>hogehoge</li>
  <li>hogehoge</li>
</ol>
</body>
</html>
```

ブラウザで表示してみるとわかりますが、表示に強弱がついていますね。また、リスト表記なども入っています。これは、それぞれの文字列に対してそういった意味付けをしているからです。それでは今回つかったタグの意味を説明していきます。

|タグ|意味|
|:--|:--|
|```<p></p>```|Paragraphの意味。段落という意味です。|
|```<h1></h1>```|Headingの意味。見出しを表します。```<h1>```から```<h6>```まであります|
|```<ul><li></li></ul>```|Unordered Listも意味|
|```<ol><li></li></ol>```|Ordered Listの意味|

ここで出したのはごく一部ですが、このようにしてHTMLには意味を持っています。このように正しいHTMLで正しく記述することは大きなメリットがあります。

HTMLはブラウザを代表として、基本的には何らかのシステムが解釈するものです。これはGoogleなどの検索エンジンのINDEXをつくっているクローラーも同じことで、クローラーは正しく書かれているHTMLのほうが解釈しやすいですし、どこが重要かがわかりやすく書かれているほうが優先的に検索上位にあがるような仕組みになっています。

そのため、正しいHTMLを記述するということはSEO観点でも非常に有利になるので決して無視することができない点です。

# デザインはどうやって行うか
HTMLは文章に対して意味付けを行うためのものです。そのため、文字色を変えたり配置の場所を指定したりなど見た目に関わる部分はHTMLではやらないのが原則になります。

しかし、その昔レイアウトするための手法や視覚的効果をいじるためにHTMLを活用していた時代がありました。例えば以下のようにしてHTMLを記述すると、簡易的にレイアウトをいじることができます。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Title</title>
</head>
<body>
<h1>heading1<h1>
<p>hello world. <font color="red">Thank you</font></p>
</body>
</html>
```

```<font></font>``` というタグで囲われた部分が赤字になったと思います。この記述方法はHTML3.2と呼ばれる時代のもので、90年代を中心に使われていた手法です。現在では非推奨な使い方になるので絶対にやってはいけません。

# スタイルシートを使ったWebデザイン
では現代においてどのようにすればいいのか。ここでスタイルシートがでてきます。さっきと同等のことをやるには以下のようにして記述します。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Title</title>
<style>
.thankyou {
  color: red;
}
</style>
</head>
<body>
<h1>heading1<h1>
  <p>hello world. <span class="thankyou">Thank you</span></p>
</body>
</html>
```

まず、HTML側で文字色を変えたい部分にたいして役割を与えます。HTMLにおいてそのような役割を与える方法はいくつかありますが、ここでは```class="thankyou"```というようにして、役割を作成しました。

あとは、```<style></style>```という中でそのclassに対してどのように表示したいかという意味をもたせます。今回は色を変更して表示したいため、以下の記述を入れています。

```
<style>
.thankyou {
  color: red;
}
</style>
```

たとえば、文字のサイズを変更したい場合は以下のようにして表記します。

```
<style>
.thankyou {
  color: red;
  font-size: 20px;
}
</style>
```

これはあくまで一例で、他にも様々な指定方法があります。これをCSSプロパティと呼びます

http://www.tagindex.com/stylesheet/properties/
